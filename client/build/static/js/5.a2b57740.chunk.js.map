{"version":3,"sources":["components/Upload.js","containers/EditGameContainer.js"],"names":["UploadWrapper","styled","div","_templateObject","Upload","_ref","handleDrop","_useState","useState","file","_useState2","Object","_home_karliatto_proyectos_otros_ekoskola_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","state","setState","onDrop","useCallback","acceptedFiles","_useDropzone","useDropzone","getRootProps","getInputProps","isDragActive","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","name","_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_5___default","onClick","useStyles","makeStyles","theme","container","display","flexWrap","textField","marginLeft","width","Wrapper","section","FormTitle","_templateObject2","FormTexts","article","_templateObject3","TextAreaLabel","label","_templateObject4","EditGameContainer","props","match","history","_home_karliatto_proyectos_otros_ekoskola_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","loading","setLoading","_useState3","description","objetive_1","objetive_2","objetive_3","location","grade","topics","classes","subjects","ekoskola_steps","timing","physical_activity","number_teachers","_useState4","form","setForm","_useState5","parseInt","params","id","gameId","_useState7","_useState8","setFile","styles","fetchGame","_home_karliatto_proyectos_otros_ekoskola_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_karliatto_proyectos_otros_ekoskola_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","game","wrap","_context","prev","next","ApiService","getGameById","sent","t0","console","error","concat","stop","apply","this","arguments","useEffect","handleTextChange","event","target","value","assign","editGame","_ref2","_callee2","formData","_context2","FormData","append","JSON","stringify","update","push","message","_x","react__WEBPACK_IMPORTED_MODULE_4___default","_components_Loader__WEBPACK_IMPORTED_MODULE_10__","_components_Upload__WEBPACK_IMPORTED_MODULE_9__","for","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_11__","required","className","margin","onChange","_material_ui_core_TextareaAutosize__WEBPACK_IMPORTED_MODULE_12__","style","height","_components_FiltersGame__WEBPACK_IMPORTED_MODULE_8__","isEdit","handleCheckboxChange","item","includes","filter","selected","handleRadioButtonChange","length","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_5__","variant","backgroundColor","color","marginRight"],"mappings":"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","file":"static/js/5.a2b57740.chunk.js","sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport styled from 'styled-components';\nimport ClearIcon from '@material-ui/icons/Clear';\n\nconst UploadWrapper = styled.div`\n  position: relative;\n  width: 30rem;\n  margin-left: 13rem;\n  height: 5rem;\n  border-width: 2px;\n  border-color: rgb(102, 102, 102);\n  border-style: dashed;\n  border-radius: 5px;\n`;\n\nfunction Upload({ handleDrop }) {\n  const [state, setState] = useState({\n    file: null,\n  });\n\n  const clearFile = () => {\n    setState({\n      file: null,\n    });\n  };\n\n  const onDrop = useCallback(\n    acceptedFiles => {\n      const file = acceptedFiles[0];\n      setState({\n        file,\n      });\n      handleDrop(file);\n    },\n    [handleDrop]\n  );\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  if (state.file) {\n    return (\n      <UploadWrapper>\n        <h1>\n          {state.file.name} <ClearIcon onClick={clearFile} />\n        </h1>\n      </UploadWrapper>\n    );\n  }\n\n  return (\n    <UploadWrapper {...getRootProps()}>\n      <input {...getInputProps()} />\n      {isDragActive ? (\n        <p>Přetáhni soubor pdf sem ...</p>\n      ) : (\n        <p>\n          Přetáhni soubor pdf sem, nebo klikni a vyber soubor ze složky. Max.\n          velikost pdf je 2 Mb. Povolený formát pouze pdf.\n        </p>\n      )}\n    </UploadWrapper>\n  );\n}\n\nexport default Upload;\n","import React, { useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport styled from 'styled-components';\n\nimport ApiService from '../ApiService';\nimport FiltersGame from '../components/FiltersGame';\nimport Upload from '../components/Upload';\nimport Loader from '../components/Loader';\n\nimport TextField from '@material-ui/core/TextField';\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  textField: {\n    marginLeft: '13rem',\n    width: '30rem',\n  },\n}));\n\nconst Wrapper = styled.section`\n  display: flex;\n  justify-content: center;\n  margin: 2rem 0rem 5rem 0rem;\n`;\n\nconst FormTitle = styled.div`\n  text-align: center;\n  font-size: 3rem;\n  color: #04a64b;\n`;\n\nconst FormTexts = styled.article`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst TextAreaLabel = styled.label`\n  margin-left: 13rem;\n  font-size: 1.375em;\n  font-weight: 700;\n  color: rgb(4, 166, 75);\n`;\n\nconst EditGameContainer = props => {\n  const { match, history } = props;\n  const [loading, setLoading] = useState(true);\n  const formState = {\n    name: '',\n    description: '',\n    objetive_1: '',\n    objetive_2: '',\n    objetive_3: '',\n    location: [],\n    grade: [],\n    topics: [],\n    classes: [],\n    subjects: [],\n    ekoskola_steps: [],\n    timing: [],\n    physical_activity: [],\n    number_teachers: [],\n  };\n\n  const [form, setForm] = useState(formState);\n\n  const [gameId] = useState(parseInt(match.params.id, 10));\n\n  const [file, setFile] = useState({\n    file: null,\n  });\n\n  const styles = useStyles();\n\n  const fetchGame = async () => {\n    try {\n      const game = await ApiService.getGameById({ id: gameId });\n      setForm(game);\n      setLoading(false);\n    } catch (error) {\n      console.error(\n        `An error occured while loading game for id ${gameId}: ${error}`\n      );\n    }\n  };\n\n  useEffect(() => {\n    fetchGame();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleTextChange = event => {\n    form[event.target.name] = event.target.value;\n    setForm(Object.assign({}, form));\n  };\n\n  const handleCheckboxChange = item => {\n    const isChecked = form[item.name].includes(item.value) || false;\n    if (isChecked) {\n      form[item.name] = form[item.name].filter(\n        selected => selected !== item.value\n      );\n    } else {\n      form[item.name].push(item.value);\n    }\n    setForm(Object.assign({}, form));\n  };\n\n  const handleRadioButtonChange = event => {\n    if (event && event.target && event.target.name) {\n      form[event.target.name].length = 0;\n      form[event.target.name].push(event.target.value);\n\n      setForm(Object.assign({}, form));\n    }\n  };\n\n  const editGame = async event => {\n    try {\n      let formData = new FormData();\n\n      if (file.file) {\n        formData.append('file', file.file, 'test.pdf');\n      }\n      formData.append('game', JSON.stringify(form));\n\n      setLoading(true);\n\n      await ApiService.update(formData, gameId);\n      history.push(`/games/${gameId}`);\n    } catch (error) {\n      console.error(`there was an error ${error.message}`);\n    }\n  };\n  const { name, description, objetive_1, objetive_2, objetive_3 } = form;\n\n  const handleDrop = file => {\n    setFile({\n      file,\n    });\n  };\n\n  return (\n    <Wrapper>\n      {loading ? (\n        <Loader />\n      ) : (\n        <section>\n          <FormTitle>Upravit hru</FormTitle>\n          <Upload handleDrop={handleDrop} />\n          <FormTexts>\n            <TextAreaLabel for=\"name\">Jmeno</TextAreaLabel>\n            <TextField\n              required\n              // error\n              id=\"name\"\n              name=\"name\"\n              value={name}\n              className={styles.textField}\n              margin=\"normal\"\n              onChange={handleTextChange}\n            />\n            <TextAreaLabel for=\"description\">Krátký popis</TextAreaLabel>\n            <TextareaAutosize\n              required\n              id=\"description\"\n              name=\"description\"\n              label=\"Krátký popis\"\n              value={description}\n              className={styles.textField}\n              style={{ height: '5rem' }}\n              margin=\"normal\"\n              onChange={handleTextChange}\n            />\n            <TextAreaLabel for=\"objetive_1\">Cíl 1</TextAreaLabel>\n            <TextareaAutosize\n              required\n              id=\"objetive_1\"\n              name=\"objetive_1\"\n              label=\"Cíl 1\"\n              value={objetive_1}\n              className={styles.textField}\n              style={{ height: '5rem' }}\n              margin=\"normal\"\n              onChange={handleTextChange}\n            />\n            <TextAreaLabel for=\"objetive_2\">Cíl 2</TextAreaLabel>\n            <TextareaAutosize\n              required\n              id=\"objetive_2\"\n              name=\"objetive_2\"\n              label=\"Cíl 2\"\n              value={objetive_2}\n              className={styles.textField}\n              style={{ height: '5rem' }}\n              margin=\"normal\"\n              onChange={handleTextChange}\n            />\n            <TextAreaLabel for=\"objetive_3\">Cíl 3</TextAreaLabel>\n            <TextareaAutosize\n              required\n              id=\"objetive_3\"\n              name=\"objetive_3\"\n              label=\"Cíl 3\"\n              value={objetive_3}\n              className={styles.textField}\n              style={{ height: '5rem' }}\n              margin=\"normal\"\n              onChange={handleTextChange}\n            />\n          </FormTexts>\n          <FiltersGame\n            isEdit={true}\n            formData={form}\n            handleCheckboxChange={handleCheckboxChange}\n            handleRadioButtonChange={handleRadioButtonChange}\n          />\n\n          <Button\n            variant=\"contained\"\n            style={{\n              backgroundColor: '#04a64b',\n              color: '#fff',\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto',\n            }}\n            onClick={editGame}\n          >\n            Upravit\n          </Button>\n        </section>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default EditGameContainer;\n"],"sourceRoot":""}